bundle: kubernetes
name: kubeflow
applications:
  admission-webhook:             { charm: admission-webhook,       channel: 1.4/stable, scale: 1 }
  argo-controller:               { charm: argo-controller,         channel: 3.1/stable, scale: 1 }
  argo-server:                   { charm: argo-server,             channel: 3.1/stable, scale: 1 }
  dex-auth:                      { charm: dex-auth,                channel: 2.28/stable, scale: 1, trust: true }
  envoy:                         { charm: envoy,                   channel: 1.12/stable, scale: 1 }
  istio-ingressgateway:          { charm: istio-gateway,           channel: 1.5/stable, scale: 1, trust: true}
  istio-pilot:                   { charm: istio-pilot,             channel: 1.5/stable, scale: 1, options: { default-gateway: "kubeflow-gateway" } }
  jupyter-controller:            { charm: jupyter-controller,      channel: 1.4/stable, scale: 1 }
  jupyter-ui:                    { charm: jupyter-ui,              channel: 1.4/stable, scale: 1 }
  katib-controller:              { charm: katib-controller,        channel: 0.12/stable, scale: 1 }
  katib-db:                      { charm: charmed-osm-mariadb-k8s, channel: latest/stable, scale: 1, options: { database: katib } }
  katib-db-manager:              { charm: katib-db-manager,        channel: 0.12/stable, scale: 1 }
  katib-ui:                      { charm: katib-ui,                channel: 0.12/stable, scale: 1 }
  kfp-api:                       { charm: kfp-api,                 channel: 1.7/stable, scale: 1 }
  kfp-db:                        { charm: charmed-osm-mariadb-k8s, channel: latest/stable, scale: 1, options: { database: mlpipeline } }
  kfp-persistence:               { charm: kfp-persistence,         channel: 1.7/stable, scale: 1 }
  kfp-profile-controller:        { charm: kfp-profile-controller,  channel: 1.7/stable, scale: 1 }
  kfp-schedwf:                   { charm: kfp-schedwf,             channel: 1.7/stable, scale: 1 }
  kfp-ui:                        { charm: kfp-ui,                  channel: 1.7/stable, scale: 1 }
  kfp-viewer:                    { charm: kfp-viewer,              channel: 1.7/stable, scale: 1 }
  kfp-viz:                       { charm: kfp-viz,                 channel: 1.7/stable, scale: 1 }
  kubeflow-dashboard:            { charm: kubeflow-dashboard,      channel: 1.4/stable, scale: 1 }
  kubeflow-profiles:             { charm: kubeflow-profiles,       channel: 1.4/stable, scale: 1 }
  kubeflow-roles:                { charm: kubeflow-roles,          channel: 1.4/stable, scale: 1, trust: true }
  kubeflow-volumes:              { charm: kubeflow-volumes,        channel: 1.4/stable, scale: 1 }
  metacontroller-operator:       { charm: metacontroller-operator, channel: 0.3/stable, scale: 1, trust: true }
  mlmd:                          { charm: mlmd,                    channel: 1.0/stable, scale: 1 }
  minio:                         { charm: minio,                   channel: latest/stable, scale: 1 }
  oidc-gatekeeper:               { charm: oidc-gatekeeper,         channel: kf-1.4/stable, scale: 1 }
  seldon-controller-manager:     { charm: seldon-core,             channel: 1.6/stable, scale: 1 }
  tensorboard-controller:        { charm: tensorboard-controller,  channel: 1.4/stable, scale: 1 }
  tensorboards-web-app:          { charm: tensorboards-web-app,    channel: 1.4/stable, scale: 1 }
  training-operator:             { charm: training-operator,       channel: 1.3/stable, scale: 1, trust: true }
relations:
- [argo-controller, minio]
- [dex-auth:oidc-client, oidc-gatekeeper:oidc-client]
- [istio-pilot:ingress, dex-auth:ingress]
- [istio-pilot:ingress, jupyter-ui:ingress]
- [istio-pilot:ingress, katib-ui:ingress]
- [istio-pilot:ingress, kfp-ui:ingress]
- [istio-pilot:ingress, kubeflow-dashboard:ingress]
- [istio-pilot:ingress, kubeflow-volumes:ingress]
- [istio-pilot:ingress, oidc-gatekeeper:ingress]
- [istio-pilot:ingress-auth, oidc-gatekeeper:ingress-auth]
- [istio-pilot:istio-pilot, istio-ingressgateway:istio-pilot]
- [istio-pilot:ingress, tensorboards-web-app:ingress]
- [katib-db-manager, katib-db]
- [kfp-api, kfp-db]
- [kfp-api:kfp-api, kfp-persistence:kfp-api]
- [kfp-api:kfp-api, kfp-ui:kfp-api]
- [kfp-api:kfp-viz, kfp-viz:kfp-viz]
- [kfp-api:object-storage, minio:object-storage]
- [kfp-profile-controller:object-storage, minio:object-storage]
- [kfp-ui:object-storage, minio:object-storage]
- [kubeflow-profiles, kubeflow-dashboard]
- [mlmd:grpc, envoy:grpc]
